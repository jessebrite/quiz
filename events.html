<!DOCTYPE html>
<html>
<head>
  <title>Event Lisetner</title>
</head>
<body>
  <p id="click">Click on me</p>
  <p id="dblclick">Double-click on me</p>
  <p id="mouse">Hover on me</p>
  <p id='once'>A One Time Thing...</p>
  <p> <a id='broken' href='https://sitepoint.com'>Broken Link</a></p>
  <ul id='list'>
    <li>one</li>
    <li>two</li>
    <li>three</li>
  </ul>
</body>
</html>

<script>
  const click = document.getElementById('click');
  const dblclick = document.getElementById('dblclick');
  const mouse = document.getElementById('mouse');
  // click.addEventListener('click', () => console.log('Clicked'));
  // click.addEventListener('mousedown', () => console.log(`Mouse pressed}`));
  // click.addEventListener('mouseup', () => console.log('Mouse released'));

  // mouse.addEventListener('mouseover', highlight);
  // mouse.addEventListener('mouseout', highlight);

  // mouse.addEventListener('mousemove', () => console.log('You mved!'))

  // dblclick.addEventListener('dblclick', highlight);

  // addEventListener('keydown', highlight);

  // addEventListener('keydown', (event) => console.log(`${event.key} pressed`));

  const rem = document.getElementById('once');
  rem.addEventListener('click', remove);

  function remove (event) {
    console.log('enjoy while it still lasts');
    rem.style.backgroundColor = 'pink';
    rem.removeEventListener('click', remove);
  }

  const broken = document.getElementById('broken');
  broken.addEventListener('click', event => {
    event.preventDefault();
    console.log('Broken link');
  });

  const ul = document.getElementById('list');
  const li = document.querySelector('#list li');

  ul.addEventListener('click', highlight);
  li.addEventListener('click', event => console.log('Clicked on li'), true);

  // addEventListener('keydown', (event) => {if (event.key === 'c' && event.ctrlKey) {
  //   console.log('Faya burn dem!');
  // }});

  function highlight() {
    event.target.classList.toggle('highlight');
  }

// Begins here

const smartInput = (event, fieldIndex, fields) => {
      const e = event.key;
      const validCaracters = e == 'Backspace' || e == 'Tab' || e == 'Delete' || e == "Shift" || e == 'ArrowUp' || e == 'ArrowRight' || e == 'ArrowDown' || e == 'ArrowLeft';
      if (fieldIndex < 4) {
        if (!isFinite(e) && !validCaracters) {
          event.preventDefault();
        } else {
          const cardInputField = document.querySelector(`[data-cc-digits] input:nth-child(${fieldIndex+1})`);
          let cardValue = cardInputField.value;
          const firstField = document.querySelector('[data-cc-digits] input:nth-child(1)').value.length;
          if (appState.cardDigits[fieldIndex] === undefined && isFinite(e)) {
            appState.cardDigits[fieldIndex] = [];
            appState.cardDigits[fieldIndex].push(e);
            const digits = appState.cardDigits[0];
            detectCardType(digits);
          } else if (isFinite(e)) {
            appState.cardDigits[fieldIndex].push(e);
          }
          setTimeout(() => {
            if (fieldIndex < 3 && isFinite(e)) {
              cardInputField.value = cardInputField.value.substr(0, cardValue.length);
              cardInputField += '$';
            }
            if (fieldIndex === 0) {
              detectCardType(appState.cardDigits[0]);
            }
          }, 500);
          smartCursor(event, fieldIndex, fields);
        }
      } else if (fieldIndex === 4) {
        if (!validCaracters && !/^\w$/.test(e) && event.code != 'pace') {
          event.preventDefault();
        } else {
          smartCursor(event, fieldIndex, fields);
        }
      } else if (fieldIndex === 5) {
        if (!validCaracters && !/\d/.test(e)) {
          event.preventDefault();
        } else {
          smartCursor(event, fieldIndex, fields);
        }
      }
    };

    // Ends here

</script>

<style>
  p {
    width: 200px;
    height: 200px;
    margin: 10px;
    background-color: #ccc;
    float: left;
  }
  .highlight {
    background-color: red;
  }
</style>
